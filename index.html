<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Tyler Buchanan - Portfolio</title>
    <link rel="stylesheet" href="styles.css?v=132">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Theme toggle - transitions exactly like name-section */
        .theme-toggle {
            position: fixed !important;
            top: 3rem;
            right: 4rem;
            z-index: 10001 !important;
            pointer-events: auto !important;
        }
        
        /* Ensure theme toggle icons container never fades - only allow icon swap transitions */
        .theme-toggle .sun-icon,
        .theme-toggle .moon-icon {
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
        }

        /* Disable image opacity transitions during theme swap */
        .theme-instant .carousel-image,
        .theme-instant .project-image {
            transition: none !important;
        }

        /* Temporary window size readout */
        #size-readout {
            position: fixed;
            bottom: 12px;
            right: 12px;
            padding: 6px 10px;
            background: rgba(0, 0, 0, 0.65);
            color: #fff;
            font: 12px/1.2 -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            border-radius: 6px;
            z-index: 10002;
            pointer-events: none;
            letter-spacing: 0.02em;
        }
        
        
        /* Page Transition Styles */
        .page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            z-index: 1;
            transform: scale(0.95);
            background-color: var(--bg-color);
            transition: opacity 0.25s ease, visibility 0.25s ease, transform 0.25s ease, background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        /* Theme toggle icons - allow icon swap transitions */
        .theme-toggle .sun-icon,
        .theme-toggle .moon-icon {
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
        }
        
        /* Home page enters from smaller scale */
        .home-page {
            transform-origin: center center;
        }
        
        .home-page.active {
            opacity: 1;
            visibility: visible;
            z-index: 2;
            transform: scale(1);
        }
        
        /* About page enters from above with larger scale */
        #about-page {
            transform-origin: center top;
            transform: translateY(-30px) scale(1.1);
            background-color: var(--about-glass-bg);
            backdrop-filter: blur(14px) saturate(120%);
            -webkit-backdrop-filter: blur(14px) saturate(120%);
            transition: transform 0.25s ease, opacity 0.25s ease, background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        #about-page.active {
            opacity: 1;
            visibility: visible;
            z-index: 2;
            transform: translateY(0) scale(1);
            transition: transform 0.25s ease, opacity 0.25s ease, background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        /* About page exits - lifts up (reverse of entry) */
        #about-page.exiting {
            opacity: 0;
            transform: translateY(-30px) scale(1.1);
        }
        
        /* Home page exits - shrinks (only for About page transitions) */
        .home-page.exiting:not(.exiting-to-project) {
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 0.25s ease, transform 0.25s ease;
        }
        
        /* Home page exits differently for project page (no fade) */
        .home-page.exiting.exiting-to-project {
            opacity: 1;
            transition: opacity 0.3s ease 1.5s;
        }
        
        /* Home page enters from below when coming from About (reverse of About entry) */
        .home-page.entering-from-about {
            transform-origin: center center;
            opacity: 0;
            transform: translateY(30px) scale(0.9);
        }
        
        .home-page.entering-from-about.active {
            opacity: 1;
            transform: translateY(0) scale(1);
            transition: opacity 0.25s ease, transform 0.25s ease;
        }
        
        /* Home page enters normally when coming from project page */
        .home-page:not(.entering-from-about).active {
            opacity: 1;
            visibility: visible;
            z-index: 2;
            transform: scale(1);
        }
        
        /* Keep carousel visible during transition - no fade, no blink */
        .home-page.exiting .timeline-carousel {
            opacity: 1 !important;
            z-index: 1000;
            pointer-events: none;
        }
        
        /* Carousel always visible, no opacity changes */
        .timeline-carousel {
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        /* Ensure carousel images stay visible */
        .timeline-carousel .carousel-image {
            opacity: 1 !important;
        }
        
        /* Hide carousel after transition completes */
        #project-page.active ~ #home-page .timeline-carousel {
            opacity: 1 !important;
        }
        
        /* Home Page */
        .home-page {
            overflow: hidden;
        }
        
        /* Timeline Carousel */
        .timeline-carousel {
            position: fixed;
            top: calc(6.5rem + 7.5rem + var(--carousel-offset, 0px) + var(--carousel-bp-offset, 0px) + var(--carousel-size-offset, 0px));
            left: 50%;
            transform: translateX(-50%);
            transform-origin: center bottom;
            width: 260px;
            max-width: 260px;
            z-index: 10;
        }
        
        .carousel-container {
            position: relative;
            width: 100%;
            overflow: hidden;
        }
        
        .carousel-image {
            width: 100%;
            height: auto;
            object-fit: contain;
            display: block;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
        }
        
        .carousel-image:hover {
            opacity: 0.8 !important;
        }
        
        [data-theme="dark"] .carousel-image.dark-image:hover {
            opacity: 0.8 !important;
        }
        
        .carousel-image.light-image {
            opacity: 1 !important;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .carousel-image.dark-image {
            opacity: 0 !important;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: auto;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        [data-theme="dark"] .carousel-image.light-image {
            opacity: 0 !important;
        }
        
        [data-theme="dark"] .carousel-image.dark-image {
            opacity: 1 !important;
        }
        
        /* Ensure theme switching works for zoomed carousel */
        .timeline-carousel.zoomed .carousel-image.light-image {
            opacity: 1 !important;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .timeline-carousel.zoomed .carousel-image.dark-image {
            opacity: 0 !important;
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: auto !important;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        [data-theme="dark"] .timeline-carousel.zoomed .carousel-image.light-image {
            opacity: 0 !important;
        }
        
        [data-theme="dark"] .timeline-carousel.zoomed .carousel-image.dark-image {
            opacity: 1 !important;
        }
        
        @media (max-width: 768px) {
            .timeline-carousel {
                width: 200px;
                max-width: 200px;
            }
        }
        
        @media (max-width: 480px) {
            .timeline-carousel {
                width: 150px;
                max-width: 150px;
            }
        }

        @media (max-width: 1600px) {
            .timeline-carousel {
                width: 230px;
                max-width: 230px;
            }

            .project-page-container {
                padding: 0 22rem;
            }

            .project-image-container {
                max-width: 520px !important;
            }

            .about-page-container {
                padding: 6.5rem 9rem;
            }

            .about-left {
                max-width: 380px;
            }

            .about-right {
                max-width: 32%;
                width: 32%;
            }

            .about-paragraph {
                font-size: 1.1rem;
            }

            .email-link,
            .about-link {
                font-size: 1.05rem;
            }
        }

        @media (max-width: 1400px) {
            .timeline-carousel {
                width: 210px;
                max-width: 210px;
            }

            .project-page-container {
                padding: 0 18rem;
            }

            .project-image-container {
                max-width: 480px !important;
            }

            .project-title {
                font-size: 1rem;
            }

            .project-role,
            .project-design,
            .project-year {
                font-size: 0.85rem;
            }

            .project-contributor {
                font-size: 0.8rem;
            }

            .about-page-container {
                padding: 6rem 7rem;
            }

            .about-left {
                max-width: 360px;
            }

            .about-right {
                max-width: 30%;
                width: 30%;
            }

            .about-paragraph {
                font-size: 1rem;
                line-height: 1.35;
            }

            .email-link,
            .about-link {
                font-size: 0.95rem;
            }
        }

        @media (max-width: 1200px) {
            .timeline-carousel {
                width: 190px;
                max-width: 190px;
            }

            .project-page-container {
                padding: 0 14rem;
            }

            .project-image-container {
                max-width: 420px !important;
            }

            .project-title {
                font-size: 0.95rem;
            }

            .project-role,
            .project-design,
            .project-year {
                font-size: 0.8rem;
            }

            .project-contributor {
                font-size: 0.75rem;
                white-space: normal;
            }

            .project-role,
            .project-design {
                white-space: normal;
            }

            .about-page-container {
                padding: 5.5rem 5rem;
            }

            .about-left {
                max-width: 320px;
            }

            .about-right {
                max-width: 34%;
                width: 34%;
                height: 42vh;
                min-height: 42vh;
            }

            .about-paragraph {
                font-size: 0.95rem;
                line-height: 1.32;
            }

            .email-link,
            .about-link {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 1000px) {
            .timeline-carousel {
                width: 170px;
                max-width: 170px;
            }

            .project-page-container {
                padding: 0 10rem;
                gap: 1.5rem;
            }

            .project-image-container {
                max-width: 360px !important;
            }

            .project-title {
                font-size: 0.9rem;
            }

            .project-role,
            .project-design,
            .project-year {
                font-size: 0.75rem;
            }

            .project-contributor {
                font-size: 0.7rem;
            }

            .about-page-container {
                padding: 5rem 3.5rem;
                gap: 3rem;
            }

            .about-left {
                max-width: 300px;
            }

            .about-right {
                max-width: 36%;
                width: 36%;
                height: 42vh;
                min-height: 42vh;
            }

            .about-paragraph {
                font-size: 0.88rem;
                line-height: 1.28;
            }

            .email-link,
            .about-link {
                font-size: 0.82rem;
            }
        }

        @media (max-width: 800px) {
            .timeline-carousel {
                width: 140px;
                max-width: 140px;
            }

            .timeline-carousel:not(.zoomed) {
                top: auto !important;
                bottom: clamp(1.5rem, 4vh, 3rem) !important;
            }

            .timeline-carousel.zoomed {
                top: auto !important;
                bottom: clamp(1.5rem, 4vh, 3rem) !important;
            }

            .project-page-container {
                padding: 0 7rem;
                gap: 1.25rem;
            }

            .project-image-container {
                max-width: 300px !important;
            }

            .project-title {
                font-size: 0.85rem;
            }

            .project-role,
            .project-design,
            .project-year {
                font-size: 0.7rem;
            }

            .project-contributor {
                font-size: 0.65rem;
            }

            .about-page-container {
                padding: 4rem 3rem;
                gap: 2.5rem;
            }

            .about-left {
                max-width: clamp(220px, 48vw, 300px);
                width: clamp(220px, 48vw, 300px);
            }

            .about-right {
                max-width: clamp(170px, 30vw, 240px);
                width: clamp(170px, 30vw, 240px);
                height: auto;
                min-height: 0;
            }

            .about-image {
                filter: grayscale(100%) !important;
                -webkit-filter: grayscale(100%) !important;
            }

            .about-paragraph {
                font-size: 0.85rem;
                line-height: 1.28;
            }

            .email-link,
            .about-link {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 650px) {
            .timeline-carousel {
                width: 120px;
                max-width: 120px;
            }

            .timeline-carousel:not(.zoomed) {
                top: auto !important;
                bottom: clamp(1.2rem, 4vh, 2.5rem) !important;
            }

            .timeline-carousel.zoomed {
                top: auto !important;
                bottom: clamp(1.2rem, 4vh, 2.5rem) !important;
            }

            .project-page-container {
                padding: 0 4.5rem;
                gap: 1rem;
            }

            .project-image-container {
                max-width: 260px !important;
            }

            .project-title {
                font-size: 0.8rem;
            }

            .project-role,
            .project-design,
            .project-year {
                font-size: 0.65rem;
            }

            .project-contributor {
                font-size: 0.6rem;
            }

            .about-page-container {
                padding: 3.5rem 2.5rem;
                gap: 2rem;
            }

            .about-left {
                max-width: clamp(200px, 52vw, 280px);
                width: clamp(200px, 52vw, 280px);
            }

            .about-right {
                max-width: clamp(160px, 32vw, 220px);
                width: clamp(160px, 32vw, 220px);
                height: auto;
                min-height: 0;
            }

            .about-image {
                filter: grayscale(100%) !important;
                -webkit-filter: grayscale(100%) !important;
            }

            .about-paragraph {
                font-size: 0.8rem;
                line-height: 1.25;
            }

            .email-link,
            .about-link {
                font-size: 0.75rem;
            }
        }

        @media (max-width: 570px) {
            .timeline-carousel {
                width: 105px;
                max-width: 105px;
            }

            .timeline-carousel:not(.zoomed) {
                top: auto !important;
                bottom: clamp(1rem, 4vh, 2rem) !important;
            }

            .timeline-carousel.zoomed {
                top: auto !important;
                bottom: clamp(1rem, 4vh, 2rem) !important;
            }

            .project-page-container {
                padding: 0 3.5rem;
                gap: 0.8rem;
            }

            .project-image-container {
                max-width: 230px !important;
            }

            .project-title {
                font-size: 0.75rem;
            }

            .project-role,
            .project-design,
            .project-year {
                font-size: 0.6rem;
            }

            .project-contributor {
                font-size: 0.55rem;
            }

            .about-page-container {
                padding: 3rem 2rem;
                gap: 1.5rem;
            }

            .about-left {
                max-width: clamp(180px, 58vw, 260px);
                width: clamp(180px, 58vw, 260px);
            }

            .about-right {
                max-width: clamp(150px, 30vw, 200px);
                width: clamp(150px, 30vw, 200px);
                height: auto;
                min-height: 0;
            }

            .about-image {
                filter: grayscale(100%) !important;
                -webkit-filter: grayscale(100%) !important;
            }

            .about-paragraph {
                font-size: 0.75rem;
                line-height: 1.22;
            }

            .email-link,
            .about-link {
                font-size: 0.7rem;
            }
        }
        
        /* Animate home page elements */
        .home-page.active .name-section,
        .home-page.active .links-section {
            animation: fadeInScaleUp 0.25s ease 0.05s both;
        }
        
        /* Toggle appears later */
        .home-page.active .theme-toggle {
            animation: fadeInScaleUp 0.25s ease 0.3s both;
        }
        
        /* Don't animate home page elements when coming from project page */
        .home-page.active:not(.entering-from-about) .name-section,
        .home-page.active:not(.entering-from-about) .links-section {
            animation: none;
        }
        
        .home-page.active:not(.entering-from-about) .theme-toggle {
            animation: none;
        }
        
        /* Animate home page elements when coming from About */
        .home-page.entering-from-about.active .name-section,
        .home-page.entering-from-about.active .links-section {
            animation: fadeInFromBelow 0.25s ease 0.05s both;
        }
        
        /* Toggle appears later when coming from About */
        .home-page.entering-from-about.active .theme-toggle {
            animation: fadeInFromBelow 0.25s ease 0.3s both;
        }
        
        
        @keyframes fadeInScaleUp {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* Animate about page elements */
        #about-page.active .about-page-container {
            animation: fadeInFromAbove 0.25s ease 0.05s both;
        }
        
        #about-page.active .back-button {
            animation: fadeInFromAbove 0.25s ease 0.02s both;
        }
        
        /* Toggle appears later on About page */
        #about-page.active .theme-toggle {
            animation: fadeInFromAbove 0.25s ease 0.3s both;
        }
        
        @keyframes fadeInFromAbove {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(1.1);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Exit animations */
        #about-page.exiting .about-page-container,
        #about-page.exiting .back-button {
            animation: liftOut 0.25s ease both;
        }
        
        /* Toggle fades out earlier when leaving About page */
        #about-page.exiting .theme-toggle {
            animation: liftOut 0.25s ease 0s both;
        }
        
        @keyframes liftOut {
            to {
                opacity: 0;
                transform: translateY(-30px) scale(1.1);
            }
        }
        
        .home-page.exiting .name-section,
        .home-page.exiting .links-section {
            animation: shrinkOut 0.2s ease both;
        }
        
        /* Toggle fades out earlier when leaving home page */
        .home-page.exiting .theme-toggle {
            animation: shrinkOut 0.2s ease 0s both;
        }
        
        @keyframes shrinkOut {
            to {
                opacity: 0;
                transform: scale(0.95);
            }
        }
        
        /* Home page elements enter from below when coming from About */
        .home-page.entering-from-about.active .name-section,
        .home-page.entering-from-about.active .links-section,
        .home-page.entering-from-about.active .theme-toggle {
            animation: fadeInFromBelow 0.25s ease 0.05s both;
        }
        
        @keyframes fadeInFromBelow {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* About Page */
        #about-page {
            overflow: hidden;
        }
        
        /* Project Detail Page */
        #project-page {
            overflow: hidden;
        }
        
        /* Ensure image stays visible during transition */
        #project-page .project-image-container {
            opacity: 1 !important;
        }
        
        .project-page-container {
            display: flex;
            height: 100vh;
            padding: 0 30rem;
            gap: 2rem;
            align-items: center;
        }
        
        .project-left {
            flex: 0 0 40%;
            max-width: clamp(300px, 31.25vw, 500px);
            min-width: 0;
        }
        
        .project-title {
            font-size: clamp(0.9rem, 1.2vw, 1.2rem);
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: clamp(0.3rem, 0.5vw, 0.5rem);
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            line-height: 1.2;
        }
        
        .project-role {
            font-size: clamp(0.75rem, 0.95vw, 0.95rem);
            font-weight: 400;
            color: var(--text-color);
            margin-bottom: clamp(0.1rem, 0.15vw, 0.15rem);
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            line-height: 1.3;
            white-space: nowrap; /* Web view: keep on one line */
        }
        
        .project-design {
            font-size: clamp(0.75rem, 0.95vw, 0.95rem);
            font-weight: 400;
            color: var(--text-color);
            margin-bottom: clamp(0.1rem, 0.15vw, 0.15rem);
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            line-height: 1.3;
            white-space: nowrap; /* Web view: keep on one line */
        }
        
        .project-company {
            font-size: 0.95rem;
            font-weight: 400;
            color: var(--text-color);
            margin-bottom: 0.15rem;
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            line-height: 1.3;
            display: block;
        }
        
        .project-year {
            font-size: clamp(0.75rem, 0.95vw, 0.95rem);
            font-weight: 400;
            color: var(--text-color);
            margin-bottom: clamp(1.5rem, 2vw, 2.5rem); /* Equal spacing above symbol */
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            line-height: 1.3;
        }
        
        .project-video-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            border: 2px solid var(--text-secondary);
            border-radius: 50%;
            color: var(--text-secondary);
            text-decoration: none;
            margin-bottom: 2rem;
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            position: relative;
        }
        
        .project-video-link::before {
            content: 'â–¶';
            font-size: 1rem;
            margin-left: 3px;
        }
        
        .project-video-link:hover {
            color: var(--text-secondary-hover);
            border-color: var(--text-secondary-hover);
        }
        
        .project-contributors {
            display: flex;
            flex-direction: column;
            gap: 0.05rem;
            margin-top: clamp(1.5rem, 2vw, 2.5rem); /* Equal spacing below symbol - move contributors down */
        }
        
        .project-contributor {
            font-size: clamp(0.7rem, 0.875vw, 0.875rem);
            color: var(--text-secondary);
            font-weight: 300;
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            white-space: nowrap; /* Web view: keep names on one line */
        }

        
        .project-right {
            flex: 1;
            max-width: 60%;
            min-width: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: visible;
        }
        
        /* Web view: project-right in overlay - hide image, use zoomed carousel instead */
        .project-detail-overlay .project-content-container .project-right {
            display: none;
        }
        
        .project-right .project-image-container {
            width: 100%;
        }
        
        .project-image-container {
            position: relative;
            width: 100%;
            max-width: 600px !important;
            min-width: 0;
        }
        
        @media (max-width: 1600px) {
            .project-image-container {
                max-width: 37.5vw !important;
            }
        }
        
        @media (max-width: 1200px) {
            .project-image-container {
                max-width: 50vw !important;
            }
        }
        
        @media (max-width: 480px) {
            .project-image-container {
                max-width: 100% !important;
            }
        }
        
        .project-image {
            width: 100%;
            height: auto;
            object-fit: contain;
            display: block;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .project-image.light-image {
            opacity: 1;
        }
        
        .project-image.dark-image {
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        [data-theme="dark"] .project-image.light-image {
            opacity: 0;
        }
        
        [data-theme="dark"] .project-image.dark-image {
            opacity: 1;
        }
        
        /* Project detail overlay - same page zoom effect */
        .project-detail-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            z-index: 100;
            pointer-events: none;
            transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        visibility 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            background-color: var(--bg-color);
        }
        
        .project-detail-overlay.active {
            opacity: 1;
            visibility: visible;
            pointer-events: all;
        }
        
        /* Project back button */
        .project-back-button {
            opacity: 0;
            visibility: hidden;
            z-index: 103;
            transition: opacity 0.25s ease 0.1s, visibility 0.25s ease 0.1s;
            pointer-events: none;
        }
        
        .project-detail-overlay.active .project-back-button {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        
        /* Make image and text not trigger zoom out */
        .timeline-carousel.zoomed,
        .project-detail-overlay .project-left {
            pointer-events: none;
        }
        
        .project-detail-overlay.active .project-left {
            pointer-events: auto;
        }
        
        /* Project content container - web view: text moved slightly to the left */
        .project-content-container {
            display: flex;
            height: auto;
            padding: 0;
            gap: 4rem;
            align-items: center;
            justify-content: flex-start;
            position: fixed;
            top: 50%;
            left: calc(50% - 320px) !important; /* Position slightly more to the left */
            transform: translateY(-50%) !important; /* Only translate Y to center vertically */
            width: auto;
            max-width: 500px;
        }
        
        /* Carousel image zoom effect - smooth transition both ways */
        .timeline-carousel {
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
                        top 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        bottom 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        left 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        right 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        /* Calculate: original bottom = 100vh - 12.5rem - 260px */
        /* For equal padding when scaled: center should be at 50vh */
        /* So translateY needed = (50vh - scaled_height/2) - (100vh - 12.5rem - 260px - 260px/2) */
        /* Simplified: translateY = 50vh - scaled_height/2 - 100vh + 12.5rem + 260px + 130px */
        /* = -50vh - scaled_height/2 + 12.5rem + 390px */
        
        /* Web view: zoomed carousel - positioned slightly to the left, slightly smaller */
        .timeline-carousel.zoomed {
            position: fixed !important;
            top: calc(6.5rem + 7.5rem + var(--carousel-offset, 0px) + var(--carousel-bp-offset, 0px) + var(--carousel-size-offset, 0px)) !important;
            left: calc(50% + 140px) !important; /* Restore project-page horizontal position */
            transform-origin: center bottom !important;
            transform: translateX(-50%) scale(1.35) !important; /* Expand upward, no vertical shift */
            z-index: 101 !important;
            width: 260px !important;
            pointer-events: none;
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        .timeline-carousel.zoomed .carousel-image {
            width: 100%;
            height: auto;
        }
        
        /* Ensure theme switching works for zoomed carousel images */
        .timeline-carousel.zoomed .carousel-image.light-image {
            opacity: 1 !important;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .timeline-carousel.zoomed .carousel-image.dark-image {
            opacity: 0 !important;
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: auto !important;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        [data-theme="dark"] .timeline-carousel.zoomed .carousel-image.light-image {
            opacity: 0 !important;
        }
        
        [data-theme="dark"] .timeline-carousel.zoomed .carousel-image.dark-image {
            opacity: 1 !important;
        }
        
        /* Project text appears on left side - web view: side by side with image */
        .project-detail-overlay .project-content-container .project-left {
            position: relative;
            left: auto;
            top: auto;
            transform: none;
            opacity: 0;
            max-width: 500px;
            z-index: 102;
            transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s;
            pointer-events: none;
            padding-right: 0;
            margin-right: 0;
        }
        
        .project-detail-overlay.active .project-content-container .project-left {
            opacity: 1;
            pointer-events: auto;
        }
        
        /* Legacy support for old selector */
        .project-detail-overlay .project-left {
            position: relative;
            left: auto;
            top: auto;
            transform: none;
            opacity: 0;
            max-width: 500px;
            z-index: 102;
            transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s;
            pointer-events: none;
            padding-right: 0;
            margin-right: 0;
        }
        
        .project-detail-overlay.active .project-left {
            opacity: 1;
            pointer-events: auto;
        }
        
        
        /* Smooth fade out for text when zooming out */
        .project-detail-overlay:not(.active) .project-left {
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        /* Hide home page elements when zoomed */
        .home-page.zoomed .name-section,
        .home-page.zoomed .links-section,
        .home-page.zoomed .theme-toggle {
            opacity: 0;
            transition: opacity 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        /* Ensure smooth reverse transition */
        .home-page:not(.zoomed) .name-section,
        .home-page:not(.zoomed) .links-section,
        .home-page:not(.zoomed) .theme-toggle {
            opacity: 1;
            transition: opacity 0.4s cubic-bezier(0.4, 0.0, 0.2, 1) 0.2s;
        }
        
        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes fadeOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(30px);
            }
        }
        
        /* Web view only: Make all Aiva page text the same size as the title */
        .project-detail-overlay .project-content-container .project-title,
        .project-detail-overlay .project-content-container .project-role,
        .project-detail-overlay .project-content-container .project-design,
        .project-detail-overlay .project-content-container .project-company,
        .project-detail-overlay .project-content-container .project-year,
        .project-detail-overlay .project-content-container .project-contributor {
            font-size: clamp(0.9rem, 1.2vw, 1.2rem) !important;
        }
        
        /* Web view: Move title, role, design, year text up even more */
        .project-detail-overlay .project-content-container .project-title {
            margin-bottom: 0 !important; /* Move up even more */
        }
        
        .project-detail-overlay .project-content-container .project-role {
            margin-bottom: 0 !important; /* Move up even more */
        }
        
        .project-detail-overlay .project-content-container .project-design {
            margin-bottom: 0 !important; /* Move up even more */
        }
        
        .project-detail-overlay .project-content-container .project-year {
            margin-bottom: clamp(1rem, 2vw, 2rem) !important; /* Add even more spacing above symbol */
        }
        
        /* Web view: Move contributors down */
        .project-detail-overlay .project-content-container .project-contributors {
            margin-top: clamp(1.5rem, 2vw, 2.5rem) !important; /* Move down */
        }
        
        /* Project link arrow - diagonal arrow symbol with circle */
        .project-link-arrow {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
            border: 2px solid var(--text-color);
            border-radius: 50%;
            font-size: clamp(0.9rem, 1.2vw, 1.2rem);
            color: var(--text-color);
            text-decoration: none;
            margin-bottom: clamp(0.5rem, 1vw, 1rem); /* Decreased padding */
            margin-top: clamp(0.5rem, 1vw, 1rem); /* Decreased padding */
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            line-height: 1;
        }
        
        .project-link-arrow:hover {
            color: var(--text-secondary-hover);
            border-color: var(--text-secondary-hover);
        }
        
        /* Web view: Position arrow to the right, centered with contributors */
        .project-detail-overlay .project-content-container .project-left {
            position: relative;
        }
        
        /* Position arrow on its own line between 2025 and Tyler Buchanan - maintain circle shape */
        .project-detail-overlay .project-content-container .project-link-arrow {
            font-size: clamp(0.9rem, 1.2vw, 1.2rem) !important;
            display: inline-flex !important; /* Keep inline-flex to maintain circle */
            align-items: center !important;
            justify-content: center !important;
            width: 2rem !important; /* Maintain circle width */
            height: 2rem !important; /* Maintain circle height */
            border: 2px solid var(--text-color) !important;
            border-radius: 50% !important; /* Maintain circle shape */
            position: static !important;
            margin-top: 0 !important;
            margin-bottom: 0 !important;
            margin-left: 0 !important;
            margin-right: 0 !important;
            transform: none !important;
        }
        
        
        @media (max-width: 480px) {
            .project-page-container {
                flex-direction: column;
                padding: 4rem 5.5rem;
                gap: 3rem;
            }
            
            .project-left {
                flex: 1;
                max-width: 100%;
            }
            
            .project-right {
                width: 100%;
                max-width: 100%;
            }
            
            .project-image-container {
                max-width: 100% !important;
            }
        }
        
        @media (max-width: 480px) {
            .project-page-container {
                padding: 2.5rem 3.5rem;
            }
        }
        
        /* Dark Mode Variables */
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --text-secondary: #888888;
            --text-secondary-hover: #000000;
        }
        
        [data-theme="dark"] {
            --bg-color: #000000;
            --text-color: #ffffff;
            --text-secondary: #888888;
            --text-secondary-hover: #ffffff;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        /* Smooth transitions for all elements that change with theme */
        * {
            transition: background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
                        color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        border-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        /* Only allow icon transitions for sun/moon swap */
        .theme-toggle .sun-icon,
        .theme-toggle .moon-icon {
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
        }
        
        /* Exclude elements that shouldn't transition */
        img, svg, canvas, video, iframe {
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        /* Theme Toggle Button - Position and styling */
        .theme-toggle {
            position: fixed !important;
            top: 3rem;
            right: 4rem;
            z-index: 10001 !important;
            color: var(--text-secondary);
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            transition: none !important;
            font-weight: 300;
            letter-spacing: 0.1em;
            line-height: 1;
            width: 1.75rem;
            height: 1.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        .theme-toggle:hover {
            color: var(--text-secondary-hover);
        }
        
        .theme-toggle .sun-icon,
        .theme-toggle .moon-icon {
            position: absolute;
            top: 0;
            left: 0;
            display: inline-block;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-size: 1.4rem;
            line-height: 1;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            width: 1.4rem;
            height: 1.4rem;
            display: grid;
            place-items: center;
        }
        
        .theme-toggle .sun-icon {
            opacity: 1;
            transform: rotate(0deg) scale(1);
            width: 1em;
            height: 1em;
            display: inline-block;
            position: relative;
        }
        
        .theme-toggle .moon-icon {
            opacity: 0;
            transform: rotate(-90deg) scale(0);
        }
        
        [data-theme="dark"] .theme-toggle .sun-icon {
            opacity: 0;
            transform: rotate(90deg) scale(0);
        }
        
        [data-theme="dark"] .theme-toggle .moon-icon {
            opacity: 1;
            transform: rotate(0deg) scale(1);
        }

        /* CSS sun symbol (no emoji) */
        .theme-toggle .sun-icon::before {
            content: '';
            position: absolute;
            inset: 28% 28%;
            border-radius: 50%;
            background: currentColor;
        }

        .theme-toggle .sun-icon::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            width: 2px;
            height: 2px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow:
                0 -9px 0 0 currentColor,
                0 9px 0 0 currentColor,
                -9px 0 0 0 currentColor,
                9px 0 0 0 currentColor,
                6px 6px 0 0 currentColor,
                -6px 6px 0 0 currentColor,
                6px -6px 0 0 currentColor,
                -6px -6px 0 0 currentColor;
            opacity: 0.9;
        }
        
        /* About Page Styles */
        .back-button {
            position: fixed;
            top: 3rem;
            left: 4rem;
            z-index: 1000;
            font-size: 1.75rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-weight: 300;
            letter-spacing: 0.1em;
            cursor: pointer;
        }
        
        .back-button:hover {
            color: var(--text-secondary-hover);
        }
        
        .about-page-container {
            display: flex;
            min-height: 100vh;
            padding: 6.5rem 12rem;
            gap: 4rem;
            align-items: center;
            justify-content: center;
            transform-origin: center top;
            background-color: var(--bg-color);
            transition: background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .about-left {
            flex: 0 0 auto;
            max-width: 400px;
            background-color: transparent;
            transition: background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        transform 0.25s ease;
            height: var(--about-image-height, auto);
            display: flex;
            align-items: flex-start;
            overflow: hidden;
        }

        .about-text-wrap {
            width: 100%;
            transform-origin: top left;
            transform: scale(var(--about-text-scale, 1));
        }
        
        .about-right {
            flex: 0 0 auto;
            max-width: 35%;
            width: 35%;
            height: 35vh;
            min-height: 35vh;
            background-color: transparent;
            display: flex !important;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            opacity: 1 !important;
            visibility: visible !important;
            transition: background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        #about-page.active .about-right {
            opacity: 1 !important;
            visibility: visible !important;
            display: flex !important;
        }
        
        .about-paragraph {
            font-size: 1.15rem;
            line-height: 1.45;
            color: var(--text-color);
            margin-bottom: 1rem;
            font-weight: 300;
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .about-links {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }
        
        .email-link,
        .about-link {
            font-size: 1.1rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 300;
            transition: color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: inline-block;
        }
        
        .email-link:hover,
        .about-link:hover {
            color: var(--text-secondary-hover);
        }
        
        .about-image {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            min-width: 200px;
            min-height: 200px;
            object-fit: contain;
            object-position: center;
            filter: grayscale(100%) !important;
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
            position: relative;
            z-index: 1;
            transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), filter 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            background: transparent;
        }
        
        /* Keep grayscale for desktop layout down to 570px; mobile overrides later */
        
        #about-page.active .about-image {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
        }
        
        @media (max-width: 480px) {
            .theme-toggle {
                top: clamp(2.2rem, 4.5vw, 3.2rem) !important;
                right: clamp(2rem, 4.5vw, 2.5rem) !important;
                left: auto !important;
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
                /* Align vertically with chevron - match back button top position exactly */
                align-items: flex-start !important;
            }
            
            .theme-toggle:focus {
                outline: none !important;
            }
            
            .theme-toggle:active {
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            .theme-toggle .sun-icon,
            .theme-toggle .moon-icon {
                font-size: 1.4rem !important;
                width: 1.4rem !important;
                height: 1.4rem !important;
                text-align: center !important;
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
                /* Ensure symbols render as text, not emoji */
                font-variant-emoji: text;
                -webkit-font-feature-settings: "liga" off;
            }
            
            /* Mobile: Back button bigger, more horizontal padding */
            .back-button {
                top: clamp(1.5rem, 3vw, 2rem) !important;
                left: clamp(2rem, 4.5vw, 2.5rem) !important;
                font-size: clamp(2rem, 4vw, 2.5rem) !important;
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            .back-button:focus {
                outline: none !important;
            }
            
            .back-button:active {
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            .project-back-button {
                top: clamp(1.5rem, 3vw, 2rem) !important;
                font-size: clamp(2rem, 4vw, 2.5rem) !important;
                left: clamp(2rem, 4.5vw, 2.5rem) !important;
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            .project-back-button:focus {
                outline: none !important;
            }
            
            .project-back-button:active {
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            /* Mobile: Name and year bigger, moved up higher, same horizontal padding as links */
            .name-section {
                position: fixed;
                top: auto;
                bottom: 60%;
                left: 0;
                padding: clamp(2rem, 4vw, 4rem) clamp(3rem, 8vw, 5.5rem);
                padding-bottom: 0;
                padding-left: clamp(3rem, 8vw, 5.5rem) !important;
                padding-right: clamp(3rem, 8vw, 5.5rem) !important;
                transform: translateY(0);
            }
            
            .name {
                font-size: clamp(2rem, 5vw, 2.5rem) !important;
                margin-bottom: clamp(0.1rem, 0.15vw, 0.15rem) !important;
            }
            
            .year {
                font-size: clamp(2rem, 5vw, 2.5rem) !important;
                margin-bottom: clamp(0.1rem, 0.15vw, 0.15rem) !important;
            }
            
            /* Mobile: Links right underneath year text, almost zero spacing, same horizontal padding */
            .links-section {
                position: fixed;
                top: auto;
                bottom: 60%;
                left: 0;
                padding: 0 clamp(3rem, 8vw, 5.5rem);
                padding-top: 0;
                transform: translateY(calc(100% - 2.5rem));
                flex-direction: column;
                align-items: flex-start;
                gap: clamp(0.05rem, 0.1vw, 0.1rem);
            }
            
            .nav-link {
                font-size: clamp(1.25rem, 3vw, 1.5rem) !important;
            }
            
            /* Mobile: Carousel image on bottom half */
            .timeline-carousel {
                position: fixed;
                top: auto;
                bottom: 0;
                left: 50%;
                transform: translateX(-50%);
                width: clamp(150px, 35vw, 220px);
                max-width: clamp(150px, 35vw, 220px);
                padding-bottom: clamp(2rem, 5vh, 4rem);
            }
            
            /* Mobile: About page - simple layout matching reference, same horizontal padding as home page */
            .about-page-container {
                flex-direction: column;
                padding: 0;
                gap: 0;
                align-items: stretch;
            }
            
            /* Mobile: Completely reset about-right for mobile */
            .about-right {
                order: -1 !important;
                width: 100% !important;
                max-width: 100% !important;
                height: auto !important;
                min-height: 0 !important;
                max-height: none !important;
                padding-top: clamp(3rem, 6vw, 5rem) !important;
                padding-left: clamp(1rem, 3vw, 2rem) !important;
                padding-right: clamp(1rem, 3vw, 2rem) !important;
                padding-bottom: 0 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: transparent !important;
                background-color: transparent !important;
                opacity: 1 !important;
                visibility: visible !important;
                overflow: visible !important;
                position: relative !important;
                flex: none !important;
            }
            
            /* Force about-right to be visible */
            #about-page.active .about-right,
            #about-page .about-right,
            #about-page.active .about-page-container .about-right,
            #about-page .about-page-container .about-right,
            .about-page-container .about-right {
                opacity: 1 !important;
                visibility: visible !important;
                display: flex !important;
                height: auto !important;
                min-height: 0 !important;
                max-height: none !important;
            }
            
            /* Mobile: Completely reset about-image for mobile */
            .about-image {
                width: 100% !important;
                max-width: 100% !important;
                height: auto !important;
                min-width: 0 !important;
                min-height: 0 !important;
                max-height: none !important;
                object-fit: contain !important;
                display: block !important;
                opacity: 1 !important;
                visibility: visible !important;
                background: transparent !important;
                background-color: transparent !important;
                filter: none !important;
                -webkit-filter: none !important;
                position: relative !important;
                z-index: 10 !important;
            }
            
            /* Force about-image to be visible with all possible selectors */
            #about-page.active .about-image,
            #about-page .about-image,
            #about-page.active .about-right .about-image,
            #about-page .about-right .about-image,
            .about-right .about-image,
            .about-right img,
            img.about-image,
            #about-page.active .about-page-container .about-image,
            #about-page .about-page-container .about-image,
            .about-page-container .about-image,
            .about-page-container img {
                width: 100% !important;
                max-width: 100% !important;
                height: auto !important;
                min-width: 0 !important;
                min-height: 0 !important;
                max-height: none !important;
                display: block !important;
                opacity: 1 !important;
                visibility: visible !important;
                background: transparent !important;
                background-color: transparent !important;
                filter: none !important;
                -webkit-filter: none !important;
            }
            
            .about-left {
                width: 100%;
                padding-left: clamp(1rem, 3vw, 2rem) !important;
                padding-right: clamp(1rem, 3vw, 2rem) !important;
                padding-top: clamp(2rem, 4vw, 3rem) !important;
                padding-bottom: clamp(2rem, 4vw, 4rem);
            }
            
            /* Mobile: Bigger bio and links text */
            .about-paragraph {
                font-size: clamp(1rem, 2.5vw, 1.2rem) !important;
                line-height: 1.5 !important;
            }
            
            .email-link,
            .about-link {
                font-size: clamp(1rem, 2.5vw, 1.2rem) !important;
            }
            
            .project-page-container {
                padding: clamp(2rem, 4vw, 4rem) clamp(3rem, 8vw, 5.5rem);
                gap: clamp(2rem, 4vw, 3rem);
            }
            
            .project-left {
                flex: 1;
                max-width: 100%;
            }
            
            .project-right {
                width: 100%;
                max-width: 100%;
            }
            
            .project-image-container {
                max-width: 100% !important;
                min-width: 0;
            }
            
            /* Mobile: Project overlay - image centered above halfway line */
            .timeline-carousel.zoomed {
                top: 44vh !important;
                left: 50% !important;
                transform-origin: center center !important;
                transform: translateX(-50%) translateY(-50%) scale(1.28) !important;
            }
            
            /* Mobile: Project content container - positioned below zoomed image */
            .project-detail-overlay .project-content-container {
                position: fixed !important;
                top: calc(30vh + 300px) !important;
                left: 50% !important;
                transform: translateX(-50%) translateX(55px) !important;
                width: 100% !important;
                max-width: 520px !important;
                display: flex !important;
                justify-content: space-between !important;
                align-items: flex-start !important;
                padding: 0 clamp(2.5rem, 6vw, 4.5rem) !important;
                height: auto !important;
            }
            
            /* Mobile: Project left - title and year only */
            .project-detail-overlay .project-left {
                position: relative !important;
                left: auto !important;
                top: auto !important;
                transform: none !important;
                flex: 0 0 auto !important;
                max-width: 320px !important;
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                column-gap: clamp(2rem, 5vw, 3rem) !important;
                align-items: start !important;
                margin-top: 12px !important;
            }

            .project-detail-overlay .project-left > * {
                grid-column: 1;
                margin-top: 0 !important;
            }
            
            /* Mobile: Show role and design on mobile */
            .project-detail-overlay .project-role,
            .project-detail-overlay .project-design {
                display: block !important;
                font-size: clamp(1.2rem, 3.2vw, 1.5rem) !important;
            }

            .project-detail-overlay .project-company {
                display: block !important;
                font-size: clamp(1.2rem, 3.2vw, 1.5rem) !important;
            }
            
            /* Mobile: Project right - contributors only (no image) */
            .project-detail-overlay .project-right {
                display: flex !important;
                flex: 0 0 auto !important;
                max-width: 220px !important;
                align-items: flex-start !important;
                justify-content: flex-end !important;
            }

            .project-detail-overlay .project-right .project-image-container {
                display: none !important;
            }

            /* Mobile: Contributors on the right column */
            .project-detail-overlay .project-contributors {
                grid-column: 2 !important;
                grid-row: 1 / span 6 !important;
                justify-self: start !important;
                text-align: left !important;
                margin-top: -70px !important;
                transform: translateY(-28px) !important;
                padding-top: 0 !important;
                align-self: start !important;
                margin-bottom: 0 !important;
            }

            .project-detail-overlay .project-contributor {
                font-size: clamp(1.2rem, 3.2vw, 1.5rem) !important;
            }

            .project-detail-overlay .project-title,
            .project-detail-overlay .project-year {
                font-size: clamp(1.2rem, 3.2vw, 1.5rem) !important;
            }

            /* Mobile: Smooth opacity fades to avoid blink on zoom out */
            .name-section,
            .links-section,
            .theme-toggle,
            .project-detail-overlay .project-left {
                transition: opacity 0.35s ease !important;
            }

        }
        
        @media (max-width: 480px) {
            .theme-toggle {
                top: clamp(1.8rem, 3.5vw, 2.3rem) !important;
                right: clamp(1.5rem, 3.5vw, 2rem) !important;
                left: auto !important;
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
                /* Align vertically with chevron - match back button top position exactly */
                align-items: flex-start !important;
            }
            
            /* Mobile: Theme toggle aligned vertically with back button */
            .back-button {
                top: clamp(1rem, 2vw, 1.5rem) !important;
            }
            
            .project-back-button {
                top: clamp(1rem, 2vw, 1.5rem) !important;
            }
            
            .theme-toggle:focus {
                outline: none !important;
            }
            
            .theme-toggle:active {
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            .theme-toggle .sun-icon,
            .theme-toggle .moon-icon {
                font-size: 1.4rem !important;
                width: 1.4rem !important;
                height: 1.4rem !important;
                text-align: center !important;
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
                /* Ensure symbols render as text, not emoji */
                font-variant-emoji: text;
                -webkit-font-feature-settings: "liga" off;
            }
            
            /* Mobile: Back button bigger, more horizontal padding */
            .back-button {
                top: clamp(1rem, 2vw, 1.5rem);
                left: clamp(1.5rem, 3.5vw, 2rem) !important;
                font-size: clamp(2rem, 4vw, 2.5rem) !important;
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            .back-button:focus {
                outline: none !important;
            }
            
            .back-button:active {
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            .project-back-button {
                font-size: clamp(2rem, 4vw, 2.5rem) !important;
                left: clamp(1.5rem, 3.5vw, 2rem) !important;
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            .project-back-button:focus {
                outline: none !important;
            }
            
            .project-back-button:active {
                outline: none !important;
                -webkit-tap-highlight-color: transparent !important;
            }
            
            .name-section {
                padding: clamp(1.5rem, 3vw, 2.5rem) clamp(2rem, 5vw, 3.5rem);
            }
            
            .links-section {
                padding: clamp(1.5rem, 3vw, 2.5rem) clamp(3rem, 7vw, 5.5rem) clamp(1.5rem, 3vw, 2.5rem) clamp(2rem, 5vw, 3.5rem);
            }
            
            .about-page-container {
                padding: clamp(1.5rem, 3vw, 2.5rem) clamp(2rem, 5vw, 3.5rem);
            }
            
            .project-page-container {
                padding: clamp(1.5rem, 3vw, 4rem) clamp(2rem, 5vw, 5.5rem);
            }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle - Always Visible, Outside Page Structure -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
        <span class="sun-icon"></span>
        <span class="moon-icon">â˜¾</span>
    </button>

    
    <!-- Home Page -->
    <div id="home-page" class="page home-page active">
        
        <!-- Name and Year - Top Left -->
        <div class="name-section">
            <h1 class="name">Tyler Buchanan</h1>
            <p class="year">2026</p>
        </div>
        
        <!-- Timeline Carousel -->
        <div class="timeline-carousel">
            <div class="carousel-container" id="carousel-container">
                <img src="project-light.png" alt="Aiva Project" class="carousel-image light-image">
                <img src="project-dark.png" alt="Aiva Project" class="carousel-image dark-image">
            </div>
        </div>

        <!-- Links - Top Right -->
        <nav class="links-section">
            <a href="#" class="nav-link" data-page="about">About</a>
            <a href="https://github.com/Buchanz" target="_blank" class="nav-link">GitHub</a>
            <a href="https://www.linkedin.com/in/tyler-buchanan-b8bb29230" target="_blank" class="nav-link">LinkedIn</a>
        </nav>

        <!-- Main Content Area - Will hold device mockups later -->
        <main class="main-content">
            <!-- Device mockups will go here -->
        </main>
        
        <!-- Project Detail Overlay - Zoom Effect -->
        <div class="project-detail-overlay" id="project-overlay">
            <!-- Back Button - Top Left -->
            <a href="#" class="back-button project-back-button" id="project-back-button">â€¹</a>
            
            <!-- Project Content -->
            <div class="project-content-container">
                <div class="project-left">
                    <h2 class="project-title">Aiva</h2>
                    <p class="project-role">Co-Founder</p>
                    <p class="project-design">Interface Design</p>
                    <p class="project-company">Arceus</p>
                    <p class="project-year">2025</p>
                    <a href="https://arceus.ca" target="_blank" class="project-link-arrow">â†—</a>
                    
                    <div class="project-contributors">
                        <span class="project-contributor">Tyler Buchanan</span>
                        <span class="project-contributor">Ivan Guo</span>
                        <span class="project-contributor">Sam Gupta</span>
                        <span class="project-contributor">Dujin Kim</span>
                    </div>
                </div>
                <div class="project-right">
                    <div class="project-image-container">
                        <img src="project-light.png" alt="Aiva Project" class="project-image light-image">
                        <img src="project-dark.png" alt="Aiva Project" class="project-image dark-image">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Page -->
    <div id="about-page" class="page">
        <!-- Back Button - Top Left -->
        <a href="#" class="back-button" data-page="home">â€¹</a>

        <!-- About Content -->
        <div class="about-page-container">
            <div class="about-left">
                <div class="about-text-wrap">
                    <p class="about-paragraph">
                        Tyler Buchanan is an entrepreneur and interface designer based in Vancouver, British Columbia. His work can be seen in products from his work with Arceus building Aiva. He is currently working on new projects while extending his education. Outside of design, Tyler spends his free time mountain biking, snowboarding, rock climbing, and birding.
                    </p>
                    <div class="about-links">
                        <a href="mailto:tyler.buchanan.a@gmail.com" class="email-link">Email</a>
                        <a href="https://github.com/Buchanz" target="_blank" class="about-link">GitHub</a>
                        <a href="https://www.linkedin.com/in/tyler-buchanan-b8bb29230" target="_blank" class="about-link">LinkedIn</a>
                    </div>
                </div>
            </div>
            
            <div class="about-right">
                <img src="about-image.png?v=16" alt="Tyler Buchanan" class="about-image" loading="eager">
            </div>
        </div>
    </div>

    <!-- Project Detail Page -->
    <div id="project-page" class="page">
        <!-- Back Button - Top Left -->
        <a href="#" class="back-button" data-page="home">â€¹</a>

        <!-- Project Content -->
        <div class="project-page-container">
            <div class="project-left">
                <h2 class="project-title">Aiva</h2>
                <p class="project-role">Co-Founder</p>
                <p class="project-design">Interface Design</p>
                <p class="project-company">Arceus</p>
                <p class="project-year">2025</p>
                
                <div class="project-contributors">
                    <span class="project-contributor">Tyler Buchanan</span>
                    <span class="project-contributor">Ivan Guo</span>
                    <span class="project-contributor">Sam Gupta</span>
                    <span class="project-contributor">Dujin Kim</span>
                </div>
            </div>
            
            <div class="project-right">
                <div class="project-image-container">
                    <img src="project-light.png" alt="Project Detail" class="project-image light-image">
                    <img src="project-dark.png" alt="Project Detail" class="project-image dark-image">
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple page transition with animations
        function showPage(pageId) {
            console.log('showPage called with:', pageId);
            // Get all pages
            const pages = document.querySelectorAll('.page');
            const currentActive = document.querySelector('.page.active');
            
            
            // Add exiting class to current page
            if (currentActive) {
                currentActive.classList.add('exiting');
                currentActive.classList.remove('active');
            }
            
            // Special handling for transition from About to Home
            if (pageId === 'home-page' && currentActive && currentActive.id === 'about-page') {
                const target = document.getElementById(pageId);
                if (target) {
                    target.classList.add('entering-from-about');
                }
            }
            
            // Special handling for transition from Home to About
            if (pageId === 'about-page' && currentActive && currentActive.id === 'home-page') {
                // Home page should fade out normally (not marked as exiting-to-project)
                // This is already handled above
            }
            
            // Delay to allow exit animation to play
            const delay = currentActive && currentActive.id === 'project-page' ? 1500 : 200;
            setTimeout(() => {
                // Remove exiting class from all pages
                pages.forEach(page => {
                    page.classList.remove('exiting');
                    page.classList.remove('entering-from-about');
                });
                
                // Add active class to target page
                const target = document.getElementById(pageId);
                if (target) {
                    target.classList.add('active');
                    
                    // Update overflow
                    if (pageId === 'home-page' || pageId === 'project-page') {
                        document.body.style.overflow = 'hidden';
                        document.documentElement.style.overflow = 'hidden';
                    } else {
                        document.body.style.overflow = 'auto';
                        document.documentElement.style.overflow = 'auto';
                    }
                    
                    if (pageId === 'about-page') {
                        alignAboutTextToImageTop();
                        fitAboutTextToImageBelow800();
                    }
                    
                }
            }, delay);
        }

        // Align home carousel bottom padding to match project page image bottom padding (desktop only)
        function alignHomeCarouselToProjectBottom() {
            const root = document.documentElement;
            const isDesktop = window.matchMedia('(min-width: 769px)').matches;
            if (!isDesktop) {
                root.style.setProperty('--carousel-offset', '0px');
                return;
            }

            const homeImage = document.querySelector('.timeline-carousel .carousel-image.light-image') ||
                document.querySelector('.timeline-carousel .carousel-image');
            const projectImage = document.querySelector('#project-page .project-image.light-image') ||
                document.querySelector('#project-page .project-image');

            if (!homeImage || !projectImage) return;

            const waitForImage = (img) => new Promise((resolve) => {
                if (img.complete && img.naturalWidth > 0) return resolve();
                img.addEventListener('load', () => resolve(), { once: true });
            });

            Promise.all([waitForImage(homeImage), waitForImage(projectImage)]).then(() => {
                requestAnimationFrame(() => {
                    const homeRect = homeImage.getBoundingClientRect();
                    const projectRect = projectImage.getBoundingClientRect();
                    if (!homeRect.height || !projectRect.height) return;
                    const projectBottomPadding = window.innerHeight - projectRect.bottom;
                    const desiredHomeBottom = window.innerHeight - projectBottomPadding - 175;
                    const delta = desiredHomeBottom - homeRect.bottom;
                    root.style.setProperty('--carousel-offset', `${Math.round(delta)}px`);
                });
            });
        }

        // Align about text top with about image top (desktop only)
        function alignAboutTextToImageTop() {
            const isDesktop = window.matchMedia('(min-width: 769px)').matches;
            const aboutPage = document.getElementById('about-page');
            const aboutLeft = document.querySelector('.about-left');
            const aboutImage = document.querySelector('.about-image');

            if (!aboutLeft || !aboutImage) return;
            if (!isDesktop || !aboutPage || !aboutPage.classList.contains('active')) {
                aboutLeft.style.transform = '';
                return;
            }

            const waitForImage = (img) => new Promise((resolve) => {
                if (img.complete && img.naturalWidth > 0) return resolve();
                img.addEventListener('load', () => resolve(), { once: true });
            });

            waitForImage(aboutImage).then(() => {
                requestAnimationFrame(() => {
                    const textRect = aboutLeft.getBoundingClientRect();
                    const imageRect = aboutImage.getBoundingClientRect();
                    if (!textRect.height || !imageRect.height) return;
                    const delta = imageRect.top - textRect.top;
                    aboutLeft.style.transform = `translateY(${Math.round(delta)}px)`;
                });
            });
        }

        // Scale about text to fit within image height below 800px (desktop layout)
        function fitAboutTextToImageBelow800() {
            const isDesktop = window.matchMedia('(min-width: 0px)').matches;
            const allowDynamic = window.matchMedia('(max-width: 799px)').matches;
            const aboutPage = document.getElementById('about-page');
            const aboutLeft = document.querySelector('.about-left');
            const aboutWrap = document.querySelector('.about-text-wrap');
            const aboutImage = document.querySelector('.about-image');

            if (!aboutLeft || !aboutWrap || !aboutImage) return;
            if (!isDesktop || !allowDynamic || !aboutPage || !aboutPage.classList.contains('active')) {
                aboutLeft.style.removeProperty('--about-image-height');
                aboutLeft.style.setProperty('--about-text-scale', '1');
                return;
            }

            const waitForImage = (img) => new Promise((resolve) => {
                if (img.complete && img.naturalWidth > 0) return resolve();
                img.addEventListener('load', () => resolve(), { once: true });
            });

            let attempts = 0;
            const apply = () => {
                requestAnimationFrame(() => {
                    const imageRect = aboutImage.getBoundingClientRect();
                    if (!imageRect.height) {
                        if (attempts < 5) {
                            attempts += 1;
                            setTimeout(apply, 60);
                        }
                        return;
                    }

                    aboutLeft.style.setProperty('--about-image-height', `${Math.round(imageRect.height)}px`);

                    // Measure at scale 1 to avoid feedback loops
                    aboutLeft.style.setProperty('--about-text-scale', '1');
                    const textHeight = aboutWrap.scrollHeight;
                    const maxHeight = imageRect.height;
                    if (!textHeight || !maxHeight) return;

                    const scaleByHeight = maxHeight / textHeight;
                    const scale = Math.min(1, scaleByHeight);
                    aboutLeft.style.setProperty('--about-text-scale', scale.toFixed(3));

                    alignAboutTextToImageTop();
                });
            };

            waitForImage(aboutImage).then(() => {
                apply();
            });
        }

        let carouselPaddingRatio = null;

        // Capture the current 1920 layout as baseline, then preserve top/bottom padding ratio
        // only below the chosen breakpoint (>=1800 stays locked).
        function initCarouselPaddingRatio() {
            const homeImage = document.querySelector('.timeline-carousel .carousel-image.light-image') ||
                document.querySelector('.timeline-carousel .carousel-image');
            if (!homeImage) return;

            const waitForImage = (img) => new Promise((resolve) => {
                if (img.complete && img.naturalWidth > 0) return resolve();
                img.addEventListener('load', () => resolve(), { once: true });
            });

            waitForImage(homeImage).then(() => {
                requestAnimationFrame(() => {
                    const rect = homeImage.getBoundingClientRect();
                    const bottomPadding = window.innerHeight - rect.bottom;
                    if (!rect.height || bottomPadding <= 0) return;
                    carouselPaddingRatio = rect.top / bottomPadding;
                    applyCarouselPaddingRatio();
                });
            });
        }

        function applyCarouselPaddingRatio() {
            const root = document.documentElement;
            const isDesktop = window.matchMedia('(min-width: 769px)').matches;
            const allowDynamic = window.matchMedia('(max-width: 1799px)').matches;
            if (!isDesktop || !allowDynamic || carouselPaddingRatio === null) {
                alignHomeCarouselToProjectBottom();
                return;
            }

            const homeImage = document.querySelector('.timeline-carousel .carousel-image.light-image') ||
                document.querySelector('.timeline-carousel .carousel-image');
            if (!homeImage) return;

            const rect = homeImage.getBoundingClientRect();
            if (!rect.height) return;

            const available = window.innerHeight - rect.height;
            if (available <= 0) return;

            const desiredTop = (carouselPaddingRatio * available) / (1 + carouselPaddingRatio);
            const minTop = 40;
            const maxTop = Math.max(minTop, window.innerHeight - rect.height - 40);
            const clampedTop = Math.min(Math.max(desiredTop, minTop), maxTop);
            const rem = parseFloat(getComputedStyle(document.documentElement).fontSize);
            const baseTop = (6.5 + 7.5) * rem;
            const offset = clampedTop - baseTop;
            root.style.setProperty('--carousel-offset', `${Math.round(offset)}px`);
        }

        function updateCarouselBreakpointOffset() {
            const root = document.documentElement;
            const bpOffset = window.matchMedia('(max-width: 1600px)').matches ? 60 : 0;
            root.style.setProperty('--carousel-bp-offset', `${bpOffset}px`);
        }

        // Theme toggle functionality
        function initTheme() {
            const themeToggles = document.querySelectorAll('.theme-toggle');
            const currentTheme = localStorage.getItem('theme') || 'light';
            
            // Set initial theme
            document.documentElement.setAttribute('data-theme', currentTheme);
            
            // Handle theme toggle clicks on all toggle buttons
            themeToggles.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const root = document.documentElement;
                    const currentTheme = root.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

                    // Temporarily disable image transitions to avoid blur
                    root.classList.add('theme-instant');
                    root.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);

                    setTimeout(() => {
                        root.classList.remove('theme-instant');
                    }, 150);
                });
            });
            
        }

        // Wait for page to load
        window.addEventListener('load', function() {
            console.log('Page loaded, setting up event listeners');
            
            // Initialize theme
            initTheme();

            // Preserve carousel padding ratio below 1800px (keep 1920 locked)
            initCarouselPaddingRatio();
            window.addEventListener('resize', applyCarouselPaddingRatio);
            alignAboutTextToImageTop();
            window.addEventListener('resize', alignAboutTextToImageTop);
            fitAboutTextToImageBelow800();
            window.addEventListener('resize', fitAboutTextToImageBelow800);
            updateCarouselBreakpointOffset();
            window.addEventListener('resize', updateCarouselBreakpointOffset);

            // Function to zoom out
            function zoomOut() {
                const overlay = document.getElementById('project-overlay');
                const carouselEl = document.querySelector('.timeline-carousel');
                const homePage = document.getElementById('home-page');
                
                if (overlay && carouselEl && homePage) {
                    overlay.classList.remove('active');
                    carouselEl.classList.remove('zoomed');
                    homePage.classList.remove('zoomed');
                    // Reset manual zoom
                    carouselEl.style.transform = '';
                    carouselEl.dataset.manualZoom = '0';
                }
            }
            
            // Manual scroll zoom control - smooth and controlled, only zoom in on scroll up
            let manualZoomLevel = 1.0;
            const minZoom = 1.0;
            const maxZoom = 1.35;
            const zoomStep = 0.03; // Larger step for more control
            const smoothTransition = 'transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), top 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), left 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
            const zoomTargetLeftPx = 140;
            
            const carouselContainer = document.getElementById('carousel-container');
            const carouselEl = document.querySelector('.timeline-carousel');
            
            // Auto-complete zoom out when scrolling stops
            let scrollTimeout = null;
            let isZoomingOut = false;
            
            function applyZoom(level, overlay, homePage, carouselEl) {
                const scale = level;
                const zoomFactor = (level - minZoom) / (maxZoom - minZoom);
                const clampedZoomFactor = Math.max(0, Math.min(1, zoomFactor));
                const isMobile = window.matchMedia('(max-width: 768px)').matches;

                if (isMobile) {
                    const fade = clampedZoomFactor;
                    const homeFade = clampedZoomFactor <= 0 ? 1 : 0;
                    const nameEl = document.querySelector('.name-section');
                    const linksEl = document.querySelector('.links-section');
                    const toggleEl = document.querySelector('.theme-toggle');
                    if (nameEl) nameEl.style.opacity = homeFade.toFixed(3);
                    if (linksEl) linksEl.style.opacity = homeFade.toFixed(3);
                    if (toggleEl) toggleEl.style.opacity = homeFade.toFixed(3);

                    const projectLeft = document.querySelector('.project-left');
                    if (projectLeft) {
                        projectLeft.style.opacity = fade.toFixed(3);
                    }

                    const overlay = document.getElementById('project-overlay');
                    if (overlay) {
                        overlay.style.opacity = fade.toFixed(3);
                        overlay.style.visibility = fade > 0 ? 'visible' : 'hidden';
                        overlay.style.pointerEvents = fade > 0 ? 'auto' : 'none';
                    }
                }
                
                if (level <= minZoom) {
                    // Reset to original position when fully zoomed out
                    carouselEl.style.position = '';
                    carouselEl.style.top = '';
                    carouselEl.style.left = '';
                    carouselEl.style.transform = '';
                    carouselEl.style.transformOrigin = '';
                    carouselEl.style.transition = smoothTransition;
                    carouselEl.dataset.manualZoom = '';
                    carouselEl.classList.remove('zoomed');
                    homePage.classList.remove('zoomed');
                    overlay.classList.remove('active');
                    overlay.style.opacity = '';
                    overlay.style.visibility = '';
                    overlay.style.pointerEvents = '';
                    
                    const projectLeft = document.querySelector('.project-left');
                    if (projectLeft) {
                        projectLeft.style.opacity = '';
                        projectLeft.style.visibility = '';
                    }
                } else {
                    // Calculate position based directly on scale
                    const scaleFactor = (scale - minZoom) / (maxZoom - minZoom);
                    let leftValue;
                    if (scaleFactor === 0) {
                        leftValue = '50%';
                    } else if (scaleFactor === 1) {
                        leftValue = `calc(50% + ${zoomTargetLeftPx}px)`;
                    } else {
                        const offsetPercent = (zoomTargetLeftPx / window.innerWidth) * 100;
                        const interpolatedLeft = 50 + (offsetPercent * scaleFactor);
                        leftValue = `${interpolatedLeft}%`;
                    }
                    
                    carouselEl.style.setProperty('position', 'fixed', 'important');
                    updateCarouselBreakpointOffset();
                    carouselEl.style.setProperty('top', 'calc(6.5rem + 7.5rem + var(--carousel-offset, 0px) + var(--carousel-bp-offset, 0px) + var(--carousel-size-offset, 0px))', 'important');
                    carouselEl.style.setProperty('left', leftValue, 'important');
                    carouselEl.style.setProperty('transform', `translateX(-50%) scale(${scale})`, 'important');
                    carouselEl.style.setProperty('transform-origin', 'center bottom', 'important');
                    carouselEl.style.setProperty('z-index', '101', 'important');
                    carouselEl.style.transition = smoothTransition;
                    carouselEl.dataset.manualZoom = level.toString();
                    
                    // Show overlay and text only when fully zoomed
                    if (level >= maxZoom) {
                        overlay.classList.add('active');
                        carouselEl.classList.add('zoomed');
                        homePage.classList.add('zoomed');
                        overlay.style.opacity = '';
                        overlay.style.visibility = '';
                        overlay.style.pointerEvents = '';
                        
                        const projectLeft = document.querySelector('.project-left');
                        if (projectLeft) {
                            projectLeft.style.opacity = '1';
                            projectLeft.style.visibility = 'visible';
                        }
                    } else {
                        overlay.style.opacity = '0';
                        overlay.style.visibility = 'hidden';
                        overlay.style.pointerEvents = 'none';
                        overlay.classList.remove('active');
                        carouselEl.classList.remove('zoomed');
                        homePage.classList.remove('zoomed');
                        
                        const projectLeft = document.querySelector('.project-left');
                        if (projectLeft) {
                            projectLeft.style.opacity = '0';
                            projectLeft.style.visibility = 'hidden';
                        }
                    }
                }
            }
            
            if (carouselContainer && carouselEl) {
                carouselContainer.addEventListener('wheel', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Check if we're in manual zoom mode
                    const isManualZoom = carouselEl.dataset.manualZoom !== undefined && carouselEl.dataset.manualZoom !== '';
                    
                    // If we're fully zoomed via click (not manual), initialize manual zoom level
                    if (carouselEl.classList.contains('zoomed') && !isManualZoom) {
                        manualZoomLevel = maxZoom;
                        carouselEl.dataset.manualZoom = manualZoomLevel.toString();
                    }
                    
                    // Calculate zoom direction - scroll down zooms in, scroll up zooms out
                    // Make scroll up zoom out fully in one scroll
                    const scrollMultiplier = e.deltaY > 0 ? 1 : 20; // Scroll up zooms out fully in one scroll
                    const delta = e.deltaY > 0 ? zoomStep : -zoomStep * scrollMultiplier;
                    manualZoomLevel = Math.max(minZoom, Math.min(maxZoom, manualZoomLevel + delta));
                    
                    // No auto-complete - zoom out works exactly like zoom in (smooth manual control)
                    // Clear any existing timeout
                    if (scrollTimeout) {
                        clearTimeout(scrollTimeout);
                        scrollTimeout = null;
                    }
                    isZoomingOut = false;
                    
                    const overlay = document.getElementById('project-overlay');
                    const homePage = document.getElementById('home-page');
                    
                    if (!overlay || !homePage) return;

                    
                    // Apply zoom immediately during scroll - smooth continuous motion
                    // Same logic as zoom in, just works in reverse
                    const scale = manualZoomLevel;
                    const zoomFactor = (manualZoomLevel - minZoom) / (maxZoom - minZoom);
                    const clampedZoomFactor = Math.max(0, Math.min(1, zoomFactor));
                    const isMobile = window.matchMedia('(max-width: 768px)').matches;
                    if (isMobile) {
                    const fade = clampedZoomFactor;
                    const homeFade = clampedZoomFactor <= 0 ? 1 : 0;
                        const nameEl = document.querySelector('.name-section');
                        const linksEl = document.querySelector('.links-section');
                        const toggleEl = document.querySelector('.theme-toggle');
                        if (nameEl) nameEl.style.opacity = homeFade.toFixed(3);
                        if (linksEl) linksEl.style.opacity = homeFade.toFixed(3);
                        if (toggleEl) toggleEl.style.opacity = homeFade.toFixed(3);

                        const projectLeft = document.querySelector('.project-left');
                        if (projectLeft) {
                            projectLeft.style.opacity = fade.toFixed(3);
                        }
                    }
                    
                    if (manualZoomLevel <= minZoom) {
                        // Reset to original position when fully zoomed out
                        carouselEl.style.position = '';
                        carouselEl.style.top = '';
                        carouselEl.style.left = '';
                        carouselEl.style.transform = '';
                        carouselEl.style.transformOrigin = '';
                        carouselEl.style.transition = smoothTransition;
                        carouselEl.dataset.manualZoom = '';
                        carouselEl.classList.remove('zoomed');
                        homePage.classList.remove('zoomed');
                        overlay.classList.remove('active');
                        overlay.style.opacity = '';
                        overlay.style.visibility = '';
                        overlay.style.pointerEvents = '';
                        
                        const projectLeft = document.querySelector('.project-left');
                        if (projectLeft) {
                            projectLeft.style.opacity = '';
                            projectLeft.style.visibility = '';
                        }
                        
                        // Cancel auto-complete since we're already at minZoom
                        isZoomingOut = false;
                        if (scrollTimeout) {
                            clearTimeout(scrollTimeout);
                            scrollTimeout = null;
                        }
                    } else {
                        // Remove zoomed class first if zoom level is below max to allow inline styles to work
                        if (manualZoomLevel < maxZoom) {
                            carouselEl.classList.remove('zoomed');
                            homePage.classList.remove('zoomed');
                        }
                        
                        // Always use inline styles for smooth transitions - never let CSS take over during manual zoom
                        // Calculate position based directly on scale - ensures perfect synchronization
                        // Scale goes from 1.0 to 1.25, normalize to 0-1 for position interpolation
                        const scaleFactor = (scale - minZoom) / (maxZoom - minZoom); // 0 to 1 based on scale
                        
                        // Calculate left position: start at 50%, end at target offset
                        // Use calc() to properly mix percentage and rem units
                        let leftValue;
                        if (scaleFactor === 0) {
                            leftValue = '50%';
                        } else if (scaleFactor === 1) {
                            leftValue = `calc(50% + ${zoomTargetLeftPx}px)`;
                        } else {
                            // Interpolate using target offset in pixels
                            const offsetPercent = (zoomTargetLeftPx / window.innerWidth) * 100;
                            const interpolatedLeft = 50 + (offsetPercent * scaleFactor);
                            leftValue = `${interpolatedLeft}%`;
                        }
                        
                        // Always apply transform and position together in one operation - perfectly synchronized
                        // During active scrolling, use no transition for instant updates (smooth motion)
                        // Transition will be applied when scrolling stops for auto-complete
                        carouselEl.style.setProperty('position', 'fixed', 'important');
                        updateCarouselBreakpointOffset();
                        carouselEl.style.setProperty('top', 'calc(6.5rem + 7.5rem + var(--carousel-offset, 0px) + var(--carousel-bp-offset, 0px) + var(--carousel-size-offset, 0px))', 'important');
                        carouselEl.style.setProperty('left', leftValue, 'important');
                        carouselEl.style.setProperty('transform', `translateX(-50%) scale(${scale})`, 'important');
                        carouselEl.style.setProperty('transform-origin', 'center bottom', 'important');
                        carouselEl.style.setProperty('z-index', '101', 'important');
                        carouselEl.style.transition = smoothTransition; // Same transition as click zoom
                        carouselEl.dataset.manualZoom = manualZoomLevel.toString();
                        
                        // Show overlay and text ONLY when fully zoomed (exactly at maxZoom)
                        // Hide text immediately when zooming out (manualZoomLevel < maxZoom)
                        if (manualZoomLevel >= maxZoom) {
                            overlay.classList.add('active');
                            carouselEl.classList.add('zoomed');
                            homePage.classList.add('zoomed');
                            overlay.style.opacity = '';
                            overlay.style.visibility = '';
                            overlay.style.pointerEvents = '';
                            
                            // Show text immediately when fully zoomed
                            const projectLeft = document.querySelector('.project-left');
                            if (projectLeft) {
                                projectLeft.style.opacity = '1';
                                projectLeft.style.visibility = 'visible';
                            }
                        } else {
                            // Hide overlay and text when NOT fully zoomed (including during zoom out)
                            overlay.style.opacity = '0';
                            overlay.style.visibility = 'hidden';
                            overlay.style.pointerEvents = 'none';
                            overlay.classList.remove('active');
                            carouselEl.classList.remove('zoomed');
                            homePage.classList.remove('zoomed');
                            
                            // Hide project text when not fully zoomed - ensure it's hidden during zoom out
                            const projectLeft = document.querySelector('.project-left');
                            if (projectLeft) {
                                projectLeft.style.opacity = '0';
                                projectLeft.style.visibility = 'hidden';
                            }
                        }
                    }
                }, { passive: false });

                // Also handle scroll on the overlay when it's active (Aiva page)
                const overlay = document.getElementById('project-overlay');
                if (overlay) {
                    overlay.addEventListener('wheel', function(e) {
                        // Only handle if overlay is active
                        if (!overlay.classList.contains('active')) {
                            return;
                        }
                        
                        e.preventDefault();
                        e.stopPropagation();
                        
                        // Check if we're in manual zoom mode
                        const isManualZoom = carouselEl.dataset.manualZoom !== undefined && carouselEl.dataset.manualZoom !== '';
                        
                        // If we're fully zoomed via click (not manual), initialize manual zoom level
                        if (carouselEl.classList.contains('zoomed') && !isManualZoom) {
                            manualZoomLevel = maxZoom;
                            carouselEl.dataset.manualZoom = manualZoomLevel.toString();
                        }
                        
                        // Calculate zoom direction - scroll down zooms in, scroll up zooms out
                        // Make scroll up zoom out fully in one scroll
                        const scrollMultiplier = e.deltaY > 0 ? 1 : 20; // Scroll up zooms out fully in one scroll
                        const delta = e.deltaY > 0 ? zoomStep : -zoomStep * scrollMultiplier;
                        manualZoomLevel = Math.max(minZoom, Math.min(maxZoom, manualZoomLevel + delta));
                        
                        // No auto-complete - zoom out works exactly like zoom in (smooth manual control)
                        // Clear any existing timeout
                        if (scrollTimeout) {
                            clearTimeout(scrollTimeout);
                            scrollTimeout = null;
                        }
                        isZoomingOut = false;
                        
                        const homePage = document.getElementById('home-page');
                        if (!homePage) return;

                        
                        // Calculate interpolation factor (0 to 1)
                        const zoomFactor = (manualZoomLevel - minZoom) / (maxZoom - minZoom);
                        const clampedZoomFactor = Math.max(0, Math.min(1, zoomFactor));
                        const scale = manualZoomLevel;
                        const isMobile = window.matchMedia('(max-width: 768px)').matches;
                        if (isMobile) {
                        const fade = clampedZoomFactor;
                        const homeFade = clampedZoomFactor <= 0 ? 1 : 0;
                            const nameEl = document.querySelector('.name-section');
                            const linksEl = document.querySelector('.links-section');
                            const toggleEl = document.querySelector('.theme-toggle');
                            if (nameEl) nameEl.style.opacity = homeFade.toFixed(3);
                            if (linksEl) linksEl.style.opacity = homeFade.toFixed(3);
                            if (toggleEl) toggleEl.style.opacity = homeFade.toFixed(3);

                            const projectLeft = document.querySelector('.project-left');
                            if (projectLeft) {
                                projectLeft.style.opacity = fade.toFixed(3);
                            }
                        }
                        
                        if (manualZoomLevel <= minZoom) {
                            // Reset to original position when fully zoomed out
                            carouselEl.style.position = '';
                            carouselEl.style.top = '';
                            carouselEl.style.left = '';
                            carouselEl.style.transform = '';
                            carouselEl.style.transformOrigin = '';
                            carouselEl.style.transition = smoothTransition;
                            carouselEl.dataset.manualZoom = '';
                            carouselEl.classList.remove('zoomed');
                            homePage.classList.remove('zoomed');
                            overlay.classList.remove('active');
                            overlay.style.opacity = '';
                            overlay.style.visibility = '';
                            overlay.style.pointerEvents = '';
                            
                            const projectLeft = document.querySelector('.project-left');
                            if (projectLeft) {
                                projectLeft.style.opacity = '';
                                projectLeft.style.visibility = '';
                            }
                        } else {
                            // Remove zoomed class first if zoom level is below max to allow inline styles to work
                            if (manualZoomLevel < maxZoom) {
                                carouselEl.classList.remove('zoomed');
                                homePage.classList.remove('zoomed');
                            }
                            
                            // Always use inline styles for smooth transitions - never let CSS take over during manual zoom
                            // Calculate position based directly on scale - ensures perfect synchronization
                            // Scale goes from 1.0 to 1.25, normalize to 0-1 for position interpolation
                            const scaleFactor = (scale - minZoom) / (maxZoom - minZoom); // 0 to 1 based on scale
                            
                            // Calculate left position: start at 50%, end at target offset
                            // Use calc() to properly mix percentage and rem units
                            let leftValue;
                            if (scaleFactor === 0) {
                                leftValue = '50%';
                            } else if (scaleFactor === 1) {
                                leftValue = `calc(50% + ${zoomTargetLeftPx}px)`;
                            } else {
                                // Interpolate using target offset in pixels
                                const offsetPercent = (zoomTargetLeftPx / window.innerWidth) * 100;
                                const interpolatedLeft = 50 + (offsetPercent * scaleFactor);
                                leftValue = `${interpolatedLeft}%`;
                            }
                            
                        // Always apply transform and position together in one operation - perfectly synchronized
                        // During active scrolling, use no transition for instant updates (smooth motion)
                        // Transition will be applied when scrolling stops for auto-complete
                        carouselEl.style.setProperty('position', 'fixed', 'important');
                        updateCarouselBreakpointOffset();
                        carouselEl.style.setProperty('top', 'calc(6.5rem + 7.5rem + var(--carousel-offset, 0px) + var(--carousel-bp-offset, 0px) + var(--carousel-size-offset, 0px))', 'important');
                        carouselEl.style.setProperty('left', leftValue, 'important');
                        carouselEl.style.setProperty('transform', `translateX(-50%) scale(${scale})`, 'important');
                        carouselEl.style.setProperty('transform-origin', 'center bottom', 'important');
                        carouselEl.style.setProperty('z-index', '101', 'important');
                        carouselEl.style.transition = smoothTransition; // Same transition as click zoom
                        carouselEl.dataset.manualZoom = manualZoomLevel.toString();
                            
                            // Show overlay and text only when fully zoomed
                            if (manualZoomLevel >= maxZoom) {
                                overlay.classList.add('active');
                                carouselEl.classList.add('zoomed');
                                homePage.classList.add('zoomed');
                                overlay.style.opacity = '';
                                overlay.style.visibility = '';
                                overlay.style.pointerEvents = '';
                                
                                // Show text immediately when fully zoomed
                                const projectLeft = document.querySelector('.project-left');
                                if (projectLeft) {
                                    projectLeft.style.opacity = '1';
                                    projectLeft.style.visibility = 'visible';
                                }
                            } else {
                                // Hide overlay and text when not fully zoomed
                                overlay.style.opacity = '0';
                                overlay.style.visibility = 'hidden';
                                overlay.style.pointerEvents = 'none';
                                overlay.classList.remove('active');
                                carouselEl.classList.remove('zoomed');
                                homePage.classList.remove('zoomed');
                                
                                // Hide project text when not fully zoomed
                                const projectLeft = document.querySelector('.project-left');
                                if (projectLeft) {
                                    projectLeft.style.opacity = '0';
                                    projectLeft.style.visibility = 'hidden';
                                }
                            }
                        }
                    }, { passive: false });

                }
            }
            
            // Handle clicks on navigation links
            document.body.addEventListener('click', function(e) {
                const link = e.target.closest('a[data-page]');
                const carouselContainer = e.target.closest('.carousel-container');
                const carouselImage = e.target.closest('.carousel-image');
                const projectBackButton = e.target.closest('#project-back-button');
                const projectLeft = e.target.closest('.project-left');
                const themeToggle = e.target.closest('.theme-toggle');
                const overlay = document.getElementById('project-overlay');
                const isOverlayActive = overlay && overlay.classList.contains('active');
                
                // Don't handle theme toggle clicks here - let theme toggle handler work
                if (themeToggle) {
                    return;
                }
                
                // Handle project back button (zoom out)
                if (projectBackButton) {
                    e.preventDefault();
                    e.stopPropagation();
                    zoomOut();
                    return false;
                }
                
                // Handle click outside image/text on overlay (zoom out)
                // Exclude theme toggle, back button, and zoomed carousel
                const zoomedCarousel = e.target.closest('.timeline-carousel.zoomed');
                if (isOverlayActive && !projectLeft && !carouselImage && !carouselContainer && !themeToggle && !projectBackButton && !zoomedCarousel) {
                    e.preventDefault();
                    e.stopPropagation();
                    zoomOut();
                    return false;
                }
                
                // Handle carousel click (zoom in)
                if (carouselContainer || carouselImage) {
                    e.preventDefault();
                    e.stopPropagation();
                    const carouselEl = document.querySelector('.timeline-carousel');
                    const homePage = document.getElementById('home-page');
                    
                    if (overlay && carouselEl && homePage) {
                        // Reset manual zoom
                        manualZoomLevel = 0;
                        carouselEl.dataset.manualZoom = '0';
                        overlay.classList.add('active');
                        carouselEl.classList.add('zoomed');
                        homePage.classList.add('zoomed');
                        // Let CSS handle the transform
                        carouselEl.style.transform = '';
                    }
                    return false;
                }
                
                // Handle regular navigation links
                if (link) {
                    console.log('Link clicked:', link);
                    e.preventDefault();
                    e.stopPropagation();
                    const page = link.getAttribute('data-page') + '-page';
                    console.log('Navigating to page:', page);
                    showPage(page);
                    return false;
                }
                
                // Handle click outside content on About page (go back to home)
                const aboutPage = document.getElementById('about-page');
                const aboutLeft = e.target.closest('.about-left');
                const aboutRight = e.target.closest('.about-right');
                const aboutImage = e.target.closest('.about-image');
                const aboutParagraph = e.target.closest('.about-paragraph');
                const aboutBackButton = e.target.closest('.back-button[data-page="home"]');
                const aboutThemeToggle = e.target.closest('.theme-toggle');
                const aboutLinks = e.target.closest('.about-links');
                const aboutLink = e.target.closest('.about-link, .email-link');
                
                if (aboutPage && aboutPage.classList.contains('active')) {
                    // If click is outside the text field (about-left) and image field (about-right), 
                    // but not on back button or theme toggle, go back to home
                    if (!aboutLeft && !aboutRight && !aboutImage && !aboutParagraph && !aboutBackButton && !aboutThemeToggle && !aboutLinks && !aboutLink) {
                        e.preventDefault();
                        e.stopPropagation();
                        showPage('home-page');
                        return false;
                    }
                }
            });
            
            // Prevent scrolling on home page
            function preventScroll(e) {
                const homePage = document.getElementById('home-page');
                if (homePage && homePage.classList.contains('active')) {
                    e.preventDefault();
                }
            }
            
            document.addEventListener('wheel', preventScroll, { passive: false });
            document.addEventListener('touchmove', preventScroll, { passive: false });
        });
    </script>
</body>
</html>
